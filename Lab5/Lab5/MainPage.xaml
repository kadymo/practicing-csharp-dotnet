<Page x:Class="Lab5.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:viewModels="clr-namespace:Lab5.ViewModels"
      xmlns:controls="clr-namespace:CommunityToolkit.WinUI.UI.Controls;assembly=CommunityToolkit.WinUI.UI.Controls.Core"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Page.DataContext>
        <viewModels:MainViewModel x:Name="ViewModel" />
    </Page.DataContext>

    <ScrollViewer IsTabStop="True">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <StackPanel Spacing="10" VerticalAlignment="Center" HorizontalAlignment="Center">
            <TextBox x:Name="Firstname" Width="400" Text="{x:Bind ViewModel.FirstName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged }" PlaceholderText="Nome" />
            <TextBox x:Name="Lastname" Width="400" Text="{x:Bind ViewModel.LastName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" PlaceholderText="Sobrenome"/>
            <TextBox x:Name="Email" Width="400" Text="{x:Bind ViewModel.Email, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" PlaceholderText="E-mail" />
            <Button Width="400" Content="Salvar dados" Command="{Binding SaveDataCommand}" />
        </StackPanel>

        <StackPanel Grid.Row="1" Spacing="10">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="10">
                <TextBox Width="400" PlaceholderText="Pesquisar por e-mail" Text="{x:Bind ViewModel.SearchTerm, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                <Button Content="Pesquisar" Command="{Binding SearchByEmailCommand}" Width="400"/>
            </StackPanel>

            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Orientation="Horizontal" Spacing="10">
                <Button Content="Ordem crescente" Width="195" Command="{Binding OrderByAscCommand}"/>
                <Button Content="Ordem decrescente" Width="195" Command="{Binding OrderByDescCommand}"/>
            </StackPanel>

            <ListView ItemsSource="{Binding Users}">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Padding="10">
                            <TextBlock Margin="16,8" Width="200" Text="{Binding FirstName}"/>
                            <TextBlock Margin="16,8" Width="200" Text="{Binding LastName}"/>
                            <TextBlock Margin="16,8" Width="200" Text="{Binding Email}"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </StackPanel>
    </Grid>
  </ScrollViewer>
</Page>
